<?php

/**
 * @file
 * Contains openy_home_branch module hooks.
 */

/**
 * Implements hook_preprocess_node().
 */
function openy_home_branch_preprocess_node(&$variables) {
  if ($variables['page']) {
    // TODO: Replace this by plugins.
    // TODO: Looks like new vue APP broke PEF... Double check how to make it work together
    $variables['#attached']['library'][] = 'openy_home_branch/location_finder';
    $variables['#attached']['library'][] = 'openy_home_branch/menu_selector';
  }
  else {
    if ($variables['teaser'] && $variables['node']->getType() == 'branch') {
      // Add location ID as data attribute for VUE application.
      $variables['attributes']['data-hb-id'] = $variables["node"]->id();
    }
  }
}
